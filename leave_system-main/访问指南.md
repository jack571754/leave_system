# 🎯 审批流程管理系统 - 访问指南

## 服务已启动 ✅

Django 服务正在运行：`http://localhost:8000`

---

## 📱 访问方式

### 1. 管理面板（推荐）

**地址**: http://localhost:8000/dashboard/

**功能**:
- ✅ 创建申请（请假/密码修改）
- ✅ 查看我的申请
- ✅ 审批待办任务
- ✅ 查看所有申请
- ✅ 审批历史记录

**使用步骤**:
1. 在浏览器打开 `http://localhost:8000/dashboard/`
2. 选择对应的标签页
3. 填写表单或输入邮箱查询
4. 点击按钮执行操作

---

### 2. API 接口

**地址**: http://localhost:8000/api/

**主要接口**:
- `POST /api/leave/create/` - 创建申请
- `GET /api/leave/my-requests/` - 我的申请
- `GET /api/leave/pending-approvals/` - 待审批任务
- `POST /api/leave/approve/` - 批准申请
- `POST /api/leave/reject/` - 拒绝申请

---

## 🧪 测试场景

### 场景1：创建请假申请

1. 访问 http://localhost:8000/dashboard/
2. 在"创建申请"标签页
3. 选择"请假申请"
4. 填写信息：
   - 邮箱: `user1@company.com`
   - 姓名: `张三`
   - 部门: `技术部`
   - 请假时长: `8` 小时
   - 原因: `生病请假`
5. 点击"提交申请"

### 场景2：创建密码修改申请

1. 在"创建申请"标签页
2. 选择"密码修改"
3. 填写信息：
   - 邮箱: `user2@company.com`
   - 姓名: `李四`
   - 部门: `财务部`
   - 密码类型: `重要密码`
   - 用户级别: `普通用户`
   - 系统名称: `财务系统`
   - 原因: `密码泄露需要更换`
4. 点击"提交申请"

### 场景3：审批申请

1. 切换到"待审批"标签页
2. 输入审批人邮箱: `manager@company.com`
3. 点击"查询"
4. 点击"审批"按钮
5. 输入审批意见
6. 选择"批准"或"拒绝"

### 场景4：查看我的申请

1. 切换到"我的申请"标签页
2. 输入邮箱: `user1@company.com`
3. 点击"查询"
4. 查看申请列表和状态
5. 点击"查看历史"查看审批记录

---

## 🔧 测试用户

### 申请人
- `user1@company.com` - 张三（技术部）
- `user2@company.com` - 李四（财务部）
- `admin@company.com` - 王五（IT部管理员）

### 审批人
- `manager@company.com` - 部门主管
- `finance_manager@company.com` - 财务部主管
- `it_manager@company.com` - IT部主管
- `it_security@company.com` - IT安全主管
- `sysadmin@company.com` - 系统管理员

---

## 📊 审批流程说明

### 请假审批流程
- **短期请假（≤24小时）**: 部门主管审批
- **长期请假（>24小时）**: 部门主管审批

### 密码修改审批流程
- **普通密码 + 普通用户**: 部门主管审批
- **重要密码 + 普通用户**: 部门主管 → IT安全主管
- **关键密码 或 管理员**: 部门主管 → IT安全主管 → 系统管理员

---

## 🚀 自动化测试

运行完整测试脚本：

```bash
# 打开新的 PowerShell 窗口
cd E:\project\leave_system-main
python test_password_change.py
```

测试脚本会自动执行：
- ✅ 场景1：普通密码修改（单级审批）
- ✅ 场景2：重要密码修改（两级审批）
- ✅ 场景3：关键密码修改（三级审批）
- ✅ 场景4：审批拒绝场景

---

## 💡 提示

1. **服务必须保持运行**: 不要关闭运行 Django 服务的窗口
2. **使用不同邮箱**: 申请人和审批人要使用不同的邮箱
3. **刷新页面**: 提交操作后可能需要刷新或重新查询
4. **查看日志**: 服务窗口会显示所有请求日志

---

## 🛠️ 故障排除

### 页面无法打开
- 检查服务是否运行
- 确认地址是 `http://localhost:8000/dashboard/`
- 查看服务窗口是否有错误信息

### 提交失败
- 检查必填字段是否填写
- 查看浏览器控制台（F12）的错误信息
- 查看服务日志

### 查询不到数据
- 确认邮箱地址正确
- 确认已经创建了申请
- 检查申请状态

---

## 📞 快速链接

- 🏠 首页: http://localhost:8000/
- 📊 管理面板: http://localhost:8000/dashboard/
- 🔌 API 文档: http://localhost:8000/api/
- 👨‍💼 管理后台: http://localhost:8000/admin/

---

**祝使用愉快！** 🎉
